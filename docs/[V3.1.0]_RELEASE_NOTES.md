# 版本 3.1.0 更新说明

发布日期：2025-08-13

## 📦 新增功能

### 🚨 录音安全保护
- **10分钟录音限制**：防止误触导致超长录音消耗API配额
  - 超过10分钟自动中止录音
  - 音频数据直接丢弃，不进行转录
  - 保护用户API成本安全

### 🎨 用户体验优化
- **状态指示器延迟删除**：添加0.2秒延迟让删除操作更自然
- **音频格式转换支持**：测试脚本支持m4a到wav转换
  - 使用FFmpeg进行格式转换
  - 兼容更多音频格式

## 📚 文档改进

### 🌍 双语文档系统
- 英文为默认文档语言
- 中文文档移至 `docs/README_zh-CN.md`
- 添加语言切换链接

### 📝 术语标准化
- 统一使用 GPT-4o 代替 GPT-4
- 保持文档一致性

### 🏷️ 项目重命名
- 项目更名为 **Whisper-Input-Next**
- 更新所有文档和脚本中的项目名称

## 🔧 技术细节

### 录音限制实现
- 在 `AudioRecorder` 类中添加 `max_record_duration = 600.0`（10分钟）
- 使用 `threading.Timer` 实现自动停止
- 添加 `abort` 参数到 `stop_recording()` 方法
- 自动停止时调用 `stop_recording(abort=True)` 中止录音

### 状态删除优化
- 在 `_delete_previous_text()` 方法中添加 `time.sleep(0.2)`
- 让状态指示器的删除更加平滑自然

## 📋 提交记录

- `a81e78e` feat: abort recording when 10-minute limit is reached
- `2549a2d` feat: add delay to status indicator deletion
- `f1a3310` feat: standardize GPT-4 terminology to GPT-4o
- `d0047a8` feat: add audio format conversion to test script
- `b81bc75` feat: add bilingual documentation support
- `d9ce440` feat: rebrand project to Whisper-Input-Next

## 🚀 升级指南

1. 更新代码：`git pull`
2. 无需额外配置，新功能自动生效
3. 录音将在10分钟时自动停止，无需担心API配额

## ⚠️ 注意事项

- 10分钟限制是为了防止意外长录音，如需更长录音请分段进行
- 被中止的录音不会保存，请注意及时停止录音